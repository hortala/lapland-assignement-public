/*!
 * Start Bootstrap - Grayscale v5.0.9 (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-grayscale/blob/master/LICENSE)
 */

!function(e) {
    "use strict";
    e('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function() {
        if(location.pathname.replace(/^\//,"") == this.pathname.replace(/^\//,"") && location.hostname==this.hostname) {
            var a=e(this.hash);
            if ((a=a.length?a:e("[name="+this.hash.slice(1)+"]")).length)return e("html, body").animate({scrollTop:a.offset().top-70},1e3,"easeInOutExpo"),!1
        }
    }),
        e(".js-scroll-trigger").click(function() {
        e(".navbar-collapse").collapse("hide")
    }),
        e("body").scrollspy({target:"#mainNav",offset:100});
    function a() {
        100<e("#mainNav").offset().top?e("#mainNav").addClass("navbar-shrink"):e("#mainNav").removeClass("navbar-shrink")
    }a(),e(window).scroll(a)
} (jQuery);

$(document).ready(function() {
    var j = 1;
    /* Zoom */
    var modal = $('#myModal')
    var span = $(".close")  
    var modalImg = $("#img01")
    var captionText = $("#caption")

    var img = $('.myImg')

    img.click(function(){
        modal.css('display', 'block')
        modalImg.attr('src', this.src)
        captionText.html(this.alt)
    });

    span.click(function() {
        modal.css('display', 'none')
    });

    /* Rotation */
    function rotation() {
        var subStr;
        var refImage;
        var targetID;
        var subStrtmp;
        var refImageTmp;
        for (var k = 0; k < 8; k++) {
            if (k == 0) {
                refImageTmp = document.getElementById('grid0').src;
                subStrtmp = refImageTmp.substring(refImageTmp.indexOf('img'), refImageTmp.length);
            }

            if (k < 7) {
                targetID = k + 1;
                targetID = 'grid' + targetID;
                refImage = document.getElementById(targetID).src;
                subStr = refImage.substring(refImage.indexOf('img'), refImage.length);
                $('#grid' + k).attr('src', subStr);
                targetID = '';
            } else if (k == 7) {
                $('#grid7').attr('src', subStrtmp);
            }
        }
    }

    var interval = setInterval(function() {
        rotation();
    }, 5500);

    function execute() {
        if (j == 3) {
            clearInterval(interval);
        }
        j++;
    }
    setTimeout(rotation,1000);


    /* Random user --> https://randomuser.me  */
    function randIdentity() {
        var myresut;
        $.ajax({
            url: "https://randomuser.me/api/",
            type: "GET",
            async: false, // Mode synchrone
            dataType: 'json',
            success : function(data){
                myresut = data;
            }
        });
        return myresut; 
    }

    /****************** DATA ******************/
    function traitement(data, userNumber) {
        /* GuideNumber */
        document.getElementById('guideNumberPos' + userNumber).innerText = userNumber + 1;
        
        /* firstName */
        document.getElementById('guideFirstName' + userNumber).innerText = data['results']['0']['name']['first'];

        /* lastName */
        document.getElementById('guideLastName' + userNumber).innerText = data['results']['0']['name']['last'];

        /* Number */
        document.getElementById('guideNumber' + userNumber).innerText = data['results']['0']['cell'];

        /* picture */
        var picture = data['results']['0']['picture']['large'];
        $('#guidePicture' + userNumber).attr('src', picture);

        document.getElementById('email' + userNumber).innerText =  data['results']['0']['email'];

        document.getElementById('city' + userNumber).innerText = data['results']['0']['location']['city'];
        document.getElementById('country' + userNumber).innerText = data['results']['0']['location']['country'];
    }

    for (var k = 0; k < 8; k++) {
        traitement(randIdentity(), k);
    }

    /****************** flip ******************/
    $('.flip').click(function(){
        $(this).find('.card').toggleClass('flipped');
    });
});












